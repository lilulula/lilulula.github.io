<!DOCTYPE html>
<html>
  <head lang="zh">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<meta content="telephone=no" name="format-detection"/>
<meta name="renderer" content="webkit">
<meta name="description" content="Memory is important">
<meta http-equiv="Access-Control-Allow-Origin" content="*">

<title>SQLå¿…çŸ¥å¿…ä¼šç¬”è®° | ç¢ç¢å¿µ</title>
<link href="https://lilulula.github.io//styles/main.css" type="text/css" rel="stylesheet"/>
<link rel="stylesheet" href="//cdn.bootcss.com/KaTeX/0.10.2/katex.min.css"/>
<script src="//cdn.bootcss.com/KaTeX/0.10.2/katex.min.js"></script>
<script src="//cdn.bootcss.com/KaTeX/0.10.2/contrib/auto-render.min.js"></script>
<script type="text/javascript" src="https://lilulula.github.io//media/scripts/jquery.js"></script>
<script type="text/javascript" src="https://lilulula.github.io//media/scripts/jquery.pjax.min.js"></script>
<script type="text/javascript" src="https://lilulula.github.io//media/scripts/basic.js"></script>
<script type="text/javascript" src="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script async type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script async type="text/javascript" src="https://lilulula.github.io//media/scripts/search.js"></script>

<script type="text/javascript" src="https://lilulula.github.io//media/js/lightgallery.min.js"></script>
<script src="https://cdn.bootcss.com/tocbot/4.8.1/tocbot.js"></script>

  </head>
  <body>
     <div class="header">
      <div class="logo_title">
		  
        <div class="title animated fadeInDown"><img id="img1" alt="logo" style="display:inline-block;" src="https://lilulula.github.io//images/avatar.png"/>
<script>
var r = 0;
    window.onload = function(){
        var current = 0;
        document.getElementById('img1').onclick = function(){
            current = (current+90)%360;
            this.style.transform = 'rotate('+current+'deg)';
        }
    };
</script>
          <h1 title="ç¢ç¢å¿µ" class="weaklink"><a  href="/">ç¢ç¢å¿µ</a>

          </h1>

          <div class="navbar weaklink">
            <div class="normal_nav">

<div class="bitcron_nav_container">


  <div class="bitcron_nav">
    <div class="mixed_site_nav_wrap site_nav_wrap">
		
      <ul class="mixed_site_nav site_nav sm sm-base">
	  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="https://lulalilu.github.io//post/dou-ban-shu-ying-yin/" class="selected active current nav__item" >æˆ‘çš„ä¹¦å½±éŸ³</a>
  </li>
  
 
 <li>

      </ul>
	  

      <div class="clear clear_nav_inline_end"></div>

<div class="search">
<i class="search-icon fa fa-search search-start"></i>
<input type="text" class="search-input" placeholder="Searching..." />
<i class="search-icon fa fa-refresh search-clear"></i>
<div class="search-results"></div>
</div>

    </div>

  </div>



  <div class="clear clear_nav_end"></div>

</div>

            </div>
			
			<div class="hamberger"><i class="fa fa-bars"></i>
<i class="fa fa-times"></i>

			</div>

          </div>

        </div>

      </div>

      <div class="hidden_nav animated fadeInDown">

<div class="bitcron_nav_container">


  <div class="bitcron_nav">
    <div class="mixed_site_nav_wrap site_nav_wrap">
      <ul class="mixed_site_nav site_nav sm sm-base">
	
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="https://lulalilu.github.io//post/dou-ban-shu-ying-yin/" class="selected active current nav__item" >æˆ‘çš„ä¹¦å½±éŸ³</a>

  </li>




      </ul>

      <div class="clear clear_nav_inline_end"></div>
    </div>

  </div>



  <div class="clear clear_nav_end"></div>

</div>

      </div>

    </div>

<style type="text/css">
.search {
    position: relative;
    height: 30px;
    text-align: right;
    line-height: 30px;
    padding-right: 10px;
}

.search .search-icon {
    float: right;
    height: 100%;
    margin: 0 10px;
    line-height: 30px;
    cursor: pointer;
    user-select: none;
}

.search .search-input {
    float: right;
    width: 30%;
    height: 30px;
    line-height: 30px;
    margin: 0;
    border: 2px solid #ddd;
    border-radius: 10px;
    box-sizing: border-box;
}

.search .search-clear {
    display: none;
}

.search .search-results {
    display: block;
    z-index: 1000;
    position: absolute;
    top: 30px;
    right: 50px;
    width: 50%;
    max-height: 400px;
    overflow: auto;
    text-align: left;
    border-radius: 5px;
    box-shadow: 0 .3rem .5rem #333;
}

.search .search-results .result-item {
    color: #000;
    margin: 5px;
    padding: 3px;
    border-radius: 3px;
    cursor: pointer;
}

</style>


    <div class="main" id="pjax-container">
      <div class="main-inner">
<div class="content">
<style>.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style:none}.toc-list{margin:0;padding-left:10px}a.toc-link{color:currentColor;height:100%}.is-collapsible{max-height:1000px;overflow:hidden;transition:all 300ms ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{position:fixed !important;top:0}.is-active-link{font-weight:700}.toc-link::before{background-color:#EEE;content:' ';display:inline-block;height:inherit;left:0;margin-top:-1px;position:absolute;width:2px}.is-active-link::before{background-color:#54BC4B}</style>
  <div class="post_page" >
<div class="post">
  <div class="post_title sm_margin">
    <h2><a>SQLå¿…çŸ¥å¿…ä¼šç¬”è®°</a>
    </h2>
  </div>
<script>
function lan(){
	if (document.getElementById("lan").innerText == "ç¹"){
		var s=document.getElementById("tongwenlet_cn");
		if(s != null){
		document.body.removeChild(s);
		}
		var s = document.createElement("script");
		s.language = "javascript";
		s.type = "text/javascript";
		s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_tw.js";
		s.id = "tongwenlet_cn";
		document.body.appendChild(s);
		document.getElementById("lan").innerHTML = "ç®€"
	}
	else if(document.getElementById("lan").innerText == "ç°¡"){
		var s=document.getElementById("tongwenlet_cn");
		if(s != null){
		document.body.removeChild(s);
		}
		var s = document.createElement("script");
		s.language = "javascript";
		s.type = "text/javascript";
		s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_cn.js";
		s.id = "tongwenlet_cn";
		document.body.appendChild(s);
		document.getElementById("lan").innerHTML = "ç¹"
		}
}

function change(){	
    var rand = Math.random()*1+1;
    var num = window.getComputedStyle(document.getElementsByName("show")[0],undefined).fontSize;
	num = num.slice(0,-2); 
    document.getElementById("show").style.fontSize = num - rand +'px';
}
</script>
  <div class="post_details">
    <div class="info"><i class="fa fa-calendar"></i>
<span class="date_info">2017-05-28</span>
<i class="fa fa-eye"></i>
<span class="date_info"><span id="busuanzi_value_page_pv"></span> Views</span>
<i class="fa fa-bookmark-o"></i>
<span class="tags_info weaklink">
	
	<a href="https://lilulula.github.io/tag/0ccGKuW3Q/" class="tag">æ•°æ®åˆ†æ</a>

</span>
<i class="fa fa-anchor"></i>
<span style="margin-right:15px">
3155å­—
</span>
<i class="fa fa-clock-o"></i>
<span style="margin-right:15px">
14 min read
</span>
<span style="margin-right:15px">
<i class="fa fa-share"></i>
<a title="QR code" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://lilulula.github.io/post/sql-bi-zhi-bi-hui-bi-ji-ban-yun-jiu-bo-ke/"><i class="fa fa-qrcode"></i></a>
<a title="qq share" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://lilulula.github.io/post/sql-bi-zhi-bi-hui-bi-ji-ban-yun-jiu-bo-ke/&sharesource=qzone&title=SQLå¿…çŸ¥å¿…ä¼šç¬”è®°&pics=https://blog.blinkstar.cn/images/avatar.png&summary=&lt;blockquote&gt;
&lt;p&gt;Sams Teach Yourself SQL in 10 Minutes - Fourth Edition&lt;br&gt;
è¯­å¥å¤‡ä»½ï¼Œæ–¹ä¾¿æŸ¥é˜…ï¼ŒSQL Serverç‰ˆæœ¬&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ£€ç´¢æ•°æ®&lt;/li&gt;
&lt;li&gt;æ’åºæ•°æ®&lt;/li&gt;
&lt;li&gt;è¿‡æ»¤è¯­å¥&lt;/li&gt;
&lt;li&gt;æ¨¡ç³Šè¿‡æ»¤&lt;/li&gt;
&lt;li&gt;å­—æ®µè®¡ç®—&lt;/li&gt;
&lt;li&gt;å‡½æ•°&lt;/li&gt;
&lt;li&gt;åˆ†ç»„æ•°æ®&lt;/li&gt;
&lt;li&gt;åµŒå¥—æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;è¿æ¥è¡¨&lt;/li&gt;
&lt;li&gt;ç»„åˆæŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;æ’å…¥æ•°æ®&lt;/li&gt;
&lt;li&gt;æ›´æ–°åˆ é™¤æ•°æ®&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå’Œæ“çºµç±»&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è§†å›¾&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹(æ‰¹å¤„ç†)&lt;/li&gt;
&lt;li&gt;ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆtransaction processingï¼‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ¸¸æ ‡&lt;/li&gt;
&lt;li&gt;é«˜çº§SQLç‰¹æ€§
&lt;ul&gt;
&lt;li&gt;çº¦æŸ&lt;/li&gt;
&lt;li&gt;ç´¢å¼•&lt;/li&gt;
&lt;li&gt;è§¦å‘å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
"><i class="fa fa-qq"></i></a>
<a title="weibo share" target="_blank" href="https://service.weibo.com/share/share.php?url=https://lilulula.github.io/post/sql-bi-zhi-bi-hui-bi-ji-ban-yun-jiu-bo-ke/&sharesource=weibo&title=SQLå¿…çŸ¥å¿…ä¼šç¬”è®° + " - " + &lt;blockquote&gt;
&lt;p&gt;Sams Teach Yourself SQL in 10 Minutes - Fourth Edition&lt;br&gt;
è¯­å¥å¤‡ä»½ï¼Œæ–¹ä¾¿æŸ¥é˜…ï¼ŒSQL Serverç‰ˆæœ¬&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ£€ç´¢æ•°æ®&lt;/li&gt;
&lt;li&gt;æ’åºæ•°æ®&lt;/li&gt;
&lt;li&gt;è¿‡æ»¤è¯­å¥&lt;/li&gt;
&lt;li&gt;æ¨¡ç³Šè¿‡æ»¤&lt;/li&gt;
&lt;li&gt;å­—æ®µè®¡ç®—&lt;/li&gt;
&lt;li&gt;å‡½æ•°&lt;/li&gt;
&lt;li&gt;åˆ†ç»„æ•°æ®&lt;/li&gt;
&lt;li&gt;åµŒå¥—æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;è¿æ¥è¡¨&lt;/li&gt;
&lt;li&gt;ç»„åˆæŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;æ’å…¥æ•°æ®&lt;/li&gt;
&lt;li&gt;æ›´æ–°åˆ é™¤æ•°æ®&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå’Œæ“çºµç±»&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è§†å›¾&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹(æ‰¹å¤„ç†)&lt;/li&gt;
&lt;li&gt;ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆtransaction processingï¼‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ¸¸æ ‡&lt;/li&gt;
&lt;li&gt;é«˜çº§SQLç‰¹æ€§
&lt;ul&gt;
&lt;li&gt;çº¦æŸ&lt;/li&gt;
&lt;li&gt;ç´¢å¼•&lt;/li&gt;
&lt;li&gt;è§¦å‘å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&pic="https://blog.blinkstar.cn/images/avatar.png"><i class="fa fa-weibo"></i></a>
</span>
<span style="margin-right:15px">
<a id="daxiao" href="javascript:void(0);" onclick="change();" title="è°ƒæ•´å­—ä½“å¤§å°"><i class="fa fa-font"></i></a>
</span>
<span style="margin-right:15px">
<a id="lan" href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“">ç¹</a>
</span>
</div>
  </div>

    <div class="post_content markdown">
	
	<img id="mememe" alt="featureimg" src="//source.unsplash.com/800x400/?arts,weather">
	
    <div name="show" id="show">
	<p class="md_block"><span class="md_line md_line_start md_line_end"><blockquote>
<p>Sams Teach Yourself SQL in 10 Minutes - Fourth Edition<br>
è¯­å¥å¤‡ä»½ï¼Œæ–¹ä¾¿æŸ¥é˜…ï¼ŒSQL Serverç‰ˆæœ¬</p>
</blockquote>
<ul>
<li>æ£€ç´¢æ•°æ®</li>
<li>æ’åºæ•°æ®</li>
<li>è¿‡æ»¤è¯­å¥</li>
<li>æ¨¡ç³Šè¿‡æ»¤</li>
<li>å­—æ®µè®¡ç®—</li>
<li>å‡½æ•°</li>
<li>åˆ†ç»„æ•°æ®</li>
<li>åµŒå¥—æŸ¥è¯¢</li>
<li>è¿æ¥è¡¨</li>
<li>ç»„åˆæŸ¥è¯¢</li>
<li>æ’å…¥æ•°æ®</li>
<li>æ›´æ–°åˆ é™¤æ•°æ®</li>
<li>åˆ›å»ºå’Œæ“çºµç±»</li>
<li>ä½¿ç”¨è§†å›¾</li>
<li>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹(æ‰¹å¤„ç†)</li>
<li>ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆtransaction processingï¼‰</li>
<li>ä½¿ç”¨æ¸¸æ ‡</li>
<li>é«˜çº§SQLç‰¹æ€§
<ul>
<li>çº¦æŸ</li>
<li>ç´¢å¼•</li>
<li>è§¦å‘å™¨</li>
</ul>
</li>
</ul>
<!-- more -->
<h1 id="æ£€ç´¢æ•°æ®">æ£€ç´¢æ•°æ®</h1>
<blockquote>
<p>SELECTè¯­å¥</p>
</blockquote>
<pre><code class="language-SQL">æ£€ç´¢å•ä¸ªåˆ—
SELECT column_name FROM tablename;

æ£€ç´¢å¤šä¸ªåˆ—
SELECT col_name1, col_name2 FROM tablename;

æ£€ç´¢æ‰€æœ‰åˆ—
SELECT * from tablename;

æ£€ç´¢ä¸åŒçš„å€¼, ä½¿ç”¨ DISTINCTå…³é”®è¯
SELECT DISTINCT col_name1 FROM tablename;
æ³¨æ„ï¼šDISTINCTå…³é”®å­—ç”¨äºæ‰€æœ‰çš„åˆ—ï¼Œä¸ä»…ä»…æ˜¯è·Ÿåœ¨å…¶åçš„é‚£ä¸€åˆ—ã€‚

è¿”å›å‰äº”è¡Œç»“æœ
SELECT top 5 prod_name
FROM Products

ä½¿ç”¨æ³¨é‡Š
----æ³¨é‡Šçš„æ–¹æ³•---
  /* è¿™æ˜¯æ³¨é‡Š
  çš„æ–¹æ³•2 */
</code></pre>
<h1 id="æ’åºæ•°æ®">æ’åºæ•°æ®</h1>
<blockquote>
<p>ORDER BY è¯­å¥</p>
</blockquote>
<pre><code class="language-SQL">--æ³¨æ„ï¼šåœ¨æŒ‡å®šä¸€æ¡ORDER BYå­å¥æ—¶ï¼Œåº”è¯¥ä¿è¯å®ƒæ˜¯SELECTè¯­å¥ä¸­æœ€åä¸€æ¡å­å¥--
SELECT col_name 
FROM tablename 
ORDER BY col_name

--å¤šåˆ—æ’åº--
SELECT col_name1, col_name2, col_name3 
FROM tablename ORDER 
BY col_name1, col_name2;

--é™åºæ’åˆ—--
SELECT col_name1, col_name2, col_name3 
FROM tablename 
ORDER BY col_name1 DESC, col_name2;

</code></pre>
<h1 id="è¿‡æ»¤è¯­å¥">è¿‡æ»¤è¯­å¥</h1>
<blockquote>
<p>WHERE è¯­å¥</p>
</blockquote>
<pre><code>SELECT col_name1, col_name2 FROM tablename WHERE col_name1 = 3.49;
SELECT col_name, col_name2 FROM tablename WHERE co_name2 BETWEEN 5 AND 10;
SELECT col_name FROM tablename WHERE col_name IS NULL;

--ANDè¯­å¥---
SELECT col_name1, col_name2, col_name3 
FROM tablename 
WHERE col_name1='ABC' AND col_name2 &lt;= 4

--ORè¯­å¥---
SELECT col_name1, col_name2, col_name3 
FROM tablename 
WHERE col_name1='ABC' OR col_name2 &lt;= 4

--æ³¨æ„ï¼šSQLåœ¨å¤„ç†ORæ“ä½œç¬¦å‰ï¼Œä¼˜å…ˆå¤„ç†ANDæ“ä½œç¬¦ã€‚ä½¿ç”¨åœ†æ‹¬å·å³å¯è§£å†³æ­¤é—®é¢˜ã€‚
SELECT prod_name, prod_price
FROM Products
WHERE (vend_id = 'DLL01' OR vend_id = â€˜BRS01â€™) AND  prod_price &gt;= 10;

--INè¯­å¥ï¼Œä¸ORè¯­å¥ç›¸å½“ï¼Œä½†æ˜¯é€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”å¯ä»¥åµŒå¥—SELECTè¯­å¥
SELECT prod_name, prod_price 
FROM Products 
WHERE vend_in IN ('DLL01', 'BSLKJL') 
ORDER BY prod_name;

--NOTè¯­å¥ï¼Œä¸&lt;&gt;ç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥ä¸INé…åˆä½¿ç”¨å®Œæˆæ›´ä¸ºå¤æ‚çš„ç­›é€‰--
SELECT prod_name 
FROM Products 
WHERE NOT vend_id='DLL01' 
ORDER BY prod_name;
</code></pre>
<h1 id="æ¨¡ç³Šè¿‡æ»¤">æ¨¡ç³Šè¿‡æ»¤</h1>
<blockquote>
<p>LIKE</p>
</blockquote>
<pre><code>---%è¡¨ç¤ºä»»ä½•å­—ç¬¦å‡ºç°ä»»æ„æ¬¡æ•°,%è¿˜èƒ½åŒ¹é…0ä¸ªå­—ç¬¦,æ³¨æ„ï¼š%ä¸èƒ½åŒ¹é…NULL;éœ€è¦æ³¨æ„å‰åçš„ç©ºæ ¼---
SELECT prod_id, pro_name FROM Products WHERE prod_name LIKE 'Fish%';
SELECT prod_id, prod_name FROM Products WHERE prod_name LIKE '%bean bag%';+
SELECT prod_id, prod_name FROM Products WHERE prod_name LIKE 'F%y';

--ä¸‹åˆ’çº¿åŒ¹é…å•ä¸ªå­—ç¬¦--------------
SELECT prodid, prodname 
FROM Products
WHERE prod_name LIKE '__inch teddy bear';

--æ–¹æ‹¬å·[]åŒ¹é…ä¸€ä¸ªå­—ç¬¦çš„å¯èƒ½é€‰é¡¹ï¼Œåªæœ‰Accesså’ŒSQL Serverä¸­æ‰å¯ä»¥ç”¨--
--ä¾‹å¦‚åŒ¹é…Jæˆ–Må¼€å¤´çš„ä»»æ„cust_contact--
SELECT cust_contact
FROM Customers
WHERE cust_contact LIKE '[JM]%' 
ORDER BY cust_contact

--æ–¹æ‹¬å·é€šé…ç¬¦å¯ä»¥ä½¿ç”¨^æ¥å¦å®š--
SELECT cust_contact
FROM Customers
WHERE cust_contact LIKE '[^JM]%' 
ORDER BY cust_contact

--ä¸Šé¢çš„ä¾‹å­å¯ä»¥ç›´æ¥ç”¨NOTæ¥é‡å†™--
SELECT cust_contact
FROM Customers
WHERE NOT cust_contact LIKE '[JM]%' 
ORDER BY cust_contact

</code></pre>
<ul>
<li>ä¸è¦è¿‡åº¦ä½¿ç”¨é€šé…ç¬¦ã€‚å¦‚æœå…¶ä»–æ“ä½œç¬¦èƒ½è¾¾åˆ°ç›¸åŒçš„ç›®çš„ï¼Œåº”è¯¥ä½¿ç”¨å…¶ä»–æ“ä½œç¬¦ã€‚</li>
<li>åœ¨ç¡®å®éœ€è¦ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œä¹Ÿå°½é‡ä¸è¦æŠŠå®ƒä»¬ç”¨åœ¨æœç´¢æ¨¡å¼çš„å¼€å§‹å¤„ã€‚æŠŠé€šé…ç¬¦ç½®äºå¼€å§‹å¤„ï¼Œæœç´¢èµ·æ¥æ˜¯æœ€æ…¢çš„ã€‚</li>
<li>ä»”ç»†æ³¨æ„é€šé…ç¬¦çš„ä½ç½®ã€‚å¦‚æœæ”¾é”™åœ°æ–¹ï¼Œå¯èƒ½ä¸ä¼šè¿”å›æƒ³è¦çš„æ•°æ®ã€‚</li>
</ul>
<h1 id="å­—æ®µè®¡ç®—">å­—æ®µè®¡ç®—</h1>
<blockquote>
<p>+å·è¿æ¥å­—æ®µ</p>
</blockquote>
<pre><code>--æ‹¼æ¥å­—æ®µ--
--Accesså’ŒSQL  Serverä½¿ç”¨+å·ã€‚DB2ã€Oracleã€PostgreSQLã€SQLiteå’ŒOpen Office Baseä½¿ç”¨||ã€‚è¯¦ç»†è¯·å‚é˜…å…·ä½“çš„DBMSæ–‡æ¡£ã€‚
--å¤§å¤šæ•°DBMSéƒ½æ”¯æŒRT RIM()ï¼ˆæ­£å¦‚åˆšæ‰æ‰€è§ï¼Œå®ƒå»æ‰å­—ç¬¦ä¸²å³è¾¹çš„ç©ºæ ¼ï¼‰ã€LT RIM()ï¼ˆå»æ‰å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼ï¼‰ä»¥åŠT RIM()ï¼ˆå»æ‰å­—ç¬¦ä¸²
å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼ï¼‰ã€‚
SELECT RTRIM(vend_name)+'('+RTRIM(vend_country)+')' AS  vend_title
FROM Vendors
ORDER BY vend_name

--å­—æ®µä¹‹é—´åŠ å‡ä¹˜é™¤--
SELECT prod_id, quantity, item_price, quantity*item_price AS expended_price 
FROM OrderItems 
WHERE order_num=20008;
</code></pre>
<h1 id="å‡½æ•°">å‡½æ•°</h1>
<blockquote>
<p>æ–‡æœ¬å‡½æ•°</p>
</blockquote>
<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è¯´ æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>LEFT()</td>
<td>è¿”å›å­—ç¬¦ä¸²å·¦è¾¹çš„å­—ç¬¦</td>
</tr>
<tr>
<td>LENGTH()</td>
<td>è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦</td>
</tr>
<tr>
<td>LOWER()</td>
<td>å°†å­—ç¬¦ä¸²è½¬ä¸ºå°å†™</td>
</tr>
<tr>
<td>UPPER()</td>
<td>å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™</td>
</tr>
<tr>
<td>LTRIM()</td>
<td>å»æ‰å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼</td>
</tr>
<tr>
<td>RIGHT()</td>
<td>è¿”å›å­—ç¬¦ä¸²å³è¾¹çš„å­—ç¬¦</td>
</tr>
<tr>
<td>RTRIM()</td>
<td>å»æ‰å­—ç¬¦ä¸²å³è¾¹çš„ç©ºæ ¼</td>
</tr>
<tr>
<td>SOUNDEX()</td>
<td>è¿”å›å­—ç¬¦ä¸²çš„SOUNDEXå€¼</td>
</tr>
</tbody>
</table>
<pre><code>--æ‰¾å‡ºå‘éŸ³ç±»ä¼¼çš„--
SELECT cust_name,cust_contact
FROM Customers
where SOUNDEX(cust_contact)=SOUNDEX('Michael Green')

</code></pre>
<blockquote>
<p>æ—¶é—´å‡½æ•°</p>
</blockquote>
<pre><code>SELECT order_num
FROM Orders
WHERE DATEPART(yy,order_date) = 2012
</code></pre>
<blockquote>
<p>æ•°å€¼å¤„ç†å‡½æ•°</p>
</blockquote>
<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ABS()</td>
<td>è¿”å›ç»å¯¹å€¼</td>
</tr>
<tr>
<td>EXP()</td>
<td>è¿”å›æŒ‡æ•°å€¼</td>
</tr>
<tr>
<td>PI()</td>
<td>è¿”å›åœ†å‘¨ç‡</td>
</tr>
<tr>
<td>SQRT()</td>
<td>è¿”å›å¹³æ–¹æ ¹</td>
</tr>
</tbody>
</table>
<blockquote>
<p>èšé›†å‡½æ•°ã€AVG() COUNT()  MAX() MIN() SUM()ã€‘</p>
</blockquote>
<ul>
<li>ä½¿ç”¨COUNT (*)å¯¹è¡¨ä¸­è¡Œçš„æ•°ç›®è¿›è¡Œè®¡æ•°ï¼Œä¸ç®¡è¡¨åˆ—ä¸­åŒ…å«çš„æ˜¯ç©ºå€¼ï¼ˆNULLï¼‰è¿˜æ˜¯éç©ºå€¼ã€‚</li>
<li>ä½¿ç”¨COUNT (column)å¯¹ç‰¹å®šåˆ—ä¸­å…·æœ‰å€¼çš„è¡Œè¿›è¡Œè®¡æ•°ï¼Œå¿½ç•¥NULLå€¼ã€‚</li>
</ul>
<pre><code>--æ±‚å¹³å‡çš„æ—¶å€™è¦æ±‚ä¸é‡å¤
SELECT AVG(DISTINCT prod_price) AS avg_price
FROM Products
WHERE vend_id = 'DLL01';

</code></pre>
<h1 id="åˆ†ç»„æ•°æ®">åˆ†ç»„æ•°æ®</h1>
<blockquote>
<p>GROUP BYå­å¥å’ŒHAVINGå­å¥</p>
</blockquote>
<pre><code>SELECT vend_id,COUNT(*) AS num_prods
FROM Products
GROUP BY vend_id

--ç»“æœ---
vend_id	num_prods
BRS01     	3
DLL01     	4
FNG01     	2
</code></pre>
<ul>
<li>WHEREåªèƒ½è¿‡æ»¤è¡Œï¼Œè€Œä¸æ˜¯åˆ†ç»„ï¼Œåˆ†ç»„è¿‡æ»¤éœ€è¦HAVING</li>
</ul>
<pre><code>SELECT vend_id,COUNT(*) AS num_prods
FROM Products
GROUP BY vend_id
HAVING COUNT(*)&gt;2
</code></pre>
<h1 id="åµŒå¥—æŸ¥è¯¢">åµŒå¥—æŸ¥è¯¢</h1>
<pre><code class="language-SQL">---------------------------------------
SELECT cust_name,cust_contact
FROM Customers
WHERE cust_id IN (SELECT cust_id
				  FROM Orders
				  WHERE order_num IN (SELECT order_num 
									  FROM OrderItems
									  WHERE prod_id = 'RGAN01'));
------------------------------------
SELECT cust_name, cust_contact
FROM Customers, Orders, OrderItems
WHERE Customers.cust _id = Orders.cust _id
AND  OrderItems.order_num = Orders.order_num
AND  prod_id = 'RGAN01';
------------------------------------
SELECT cust_name,
       cust_state,
       (SELECT COUNT(*)
        FROM Orders
        WHERE Orders.cust_id = Customers.cust_id) AS orders
FROM Customers		
ORDER BY cust_name		  
</code></pre>
<h1 id="è¿æ¥è¡¨">è¿æ¥è¡¨</h1>
<blockquote>
<p>join</p>
</blockquote>
<pre><code class="language-SQL">------ç­‰å€¼è¿æ¥-----------
SELECT vend_name,prod_name,prod_price
FROM Vendors,Products  
WHERE Vendors.vend_id = Products.vend_id


------å†…è¿æ¥-------------
SELECT vend_name,prod_name,prod_price
FROM Vendors INNER JOIN Products
ON Vendors.vend_id = Products.vend_id
------å¤–è¿æ¥---------------
-INNER JOIN äº§ç”Ÿçš„ç»“æœæ˜¯ABçš„äº¤é›†
-LEFT [OUTER] JOIN äº§ç”Ÿè¡¨Açš„å®Œå…¨é›†ï¼Œè€ŒBè¡¨ä¸­åŒ¹é…çš„åˆ™æœ‰å€¼ï¼Œæ²¡æœ‰åŒ¹é…çš„åˆ™ä»¥nullå€¼å–ä»£ã€‚
-RIGHT [OUTER] JOIN äº§ç”Ÿè¡¨Bçš„å®Œå…¨é›†ï¼Œè€ŒAè¡¨ä¸­åŒ¹é…çš„åˆ™æœ‰å€¼ï¼Œæ²¡æœ‰åŒ¹é…çš„åˆ™ä»¥nullå€¼å–ä»£ã€‚
-FULL [OUTER] JOIN äº§ç”ŸAå’ŒBçš„å¹¶é›†ã€‚å¯¹äºæ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¼šä»¥nullåšä¸ºå€¼ã€‚

SELECT vend_name,prod_name,prod_price
FROM Vendors LEFT OUTER JOIN Products
ON Vendors.vend_id = Products.vend_id

SELECT vend_name,prod_name,prod_price
FROM Vendors RIGHT OUTER JOIN Products
ON Vendors.vend_id = Products.vend_id
-------è¡¨åˆ«å-------------
SELECT cust_name,cust_contact
FROM Customers AS C ,Orders AS O,OrderItems AS OI
WHERE  C.cust_id = O.cust_id AND OI.order_num = O.order_num AND prod_id = 'RGAN01';
</code></pre>
<pre><code>--è¿™ä¸ªä¾‹å­ä½¿ç”¨å·¦å¤–éƒ¨è”ç»“æ¥åŒ…å«æ‰€æœ‰é¡¾å®¢ï¼Œç”šè‡³åŒ…å«é‚£äº›æ²¡æœ‰ä»»ä½•è®¢å•çš„é¡¾å®¢ã€‚
SELECT Customers.cust_id,
COUNT(Orders.order_num) AS  num_ord
FROM Cust omers LEFT OUTER JOIN  Orders
ON  Customers.cust _id = Orders.cust _id
GROUP BY Customers.cust _id;
</code></pre>
<h1 id="ç»„åˆæŸ¥è¯¢">ç»„åˆæŸ¥è¯¢</h1>
<blockquote>
<p>UNIONå‡½æ•°<br>
ç›´æ¥åœ¨ä¸¤æ¡SELECTè¯­å¥ä¹‹é—´ï¼Œå°†ç»“æœåˆå¹¶åœ¨ä¸€èµ·ï¼Œç±»ä¼¼åœ¨WHEREä¸­ä½¿ç”¨ORå‡½æ•°ï¼ŒUNIONä¼šé»˜è®¤å»é™¤é‡å¤æ•°æ®ï¼ŒUNION ALLä¸å»é™¤é‡å¤æ•°æ®ã€‚ORDER BYå‡½æ•°å¿…é¡»æ”¾åœ¨æœ€åä¸€ä¸ªSELECTè¯­å¥ä¸­ï¼Œå¹¶ä½œç”¨äºæœ€åçš„åˆå¹¶ç»“æœ</p>
</blockquote>
<h1 id="æ’å…¥æ•°æ®">æ’å…¥æ•°æ®</h1>
<blockquote>
<p>INSERT INTO æŒ‰ç…§åˆ—åæ¥å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¯ä»¥åªæ’å…¥éƒ¨åˆ†æ•°æ®ï¼Œ</p>
</blockquote>
<pre><code class="language-SQL">------æ’å…¥ä¸€è¡Œæ•°æ®------------
INSERT INTO Customers(cust_id, 
cust_name, 
cust_city,
cust_state, 
cust_zip, 
cust_country, 
cust_contact, 
cust_email)
VALUES('1000000001', 
'Village Toys',
 '200 Maple Lane', 
 'Detroit',
 'MI', 
 'USA',
 'John Smith',
 'sales@villagetoys.com');
</code></pre>
<pre><code class="language-SQL">-----æ’å…¥SELECTç»“æœï¼Œåªå…³æ³¨é¡ºåºï¼Œä¸å…³æ³¨ç­›é€‰å‡ºçš„å­—æ®µå-------
INSERT INTO Customers(cust_id,
                      cust_contact ,
                      cust_email,
                      cust_name,
                      cust_address,
                      cust_city ,
                      cust_state,
                      cust_zip,
                      cust_country )
SELECT cust_id,
       cust_contact ,
       cust_email,
       cust_name,
       cust_address,
       cust_city ,
       cust_state,
       cust_zip,
       cust_country
FROM CustNew;
</code></pre>
<pre><code class="language-SQL">-----ä»ä¸€ä¸ªè¡¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªè¡¨-------
SELECT *
INTO CustCopy
FROM Customers

</code></pre>
<h1 id="æ›´æ–°åˆ é™¤æ•°æ®">æ›´æ–°åˆ é™¤æ•°æ®</h1>
<blockquote>
<p>UPDATE  DELETE</p>
</blockquote>
<pre><code>----æ›´æ–°æŒ‡å®šè¡Œ-------------
UPDATE Customers
SET cust_contact  = 'Sam Roberts',
    cust_email = 'sam@toyland.com'
WHERE cust_id = '1000000006';
------åˆ é™¤æŒ‡å®šè¡Œ--------
DELETE FROM Cust omers
WHERE cust_id = '1000000006';
--DELETEåªèƒ½åˆ é™¤è¡Œï¼Œåˆ é™¤åˆ—åˆ™ç”¨update
--åˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®TRUNCATE TABLEé€Ÿåº¦æ›´å¿«
</code></pre>
<h1 id="åˆ›å»ºå’Œæ“çºµç±»">åˆ›å»ºå’Œæ“çºµç±»</h1>
<pre><code class="language-SQL">----åˆ›å»ºè¡¨-------------
CREATE TABLE Products
(
  prod_id    char(10)      NOT NULL ,
  vend_id    char(10)      NOT NULL ,
  prod_name  char(255)     NOT NULL ,
  prod_price decimal(8,2)  DEFAULT 1,
  prod_desc  varchar(1000) NULL 
);
</code></pre>
<pre><code>------æ›´æ–°è¡¨---------
ALTER  TABLE Vendos
ADD vend_phone CHAR(20);
ALTER  TABLE Vendos
DROP COULUMN vend_phone;
</code></pre>
<pre><code>----åˆ é™¤è¡¨-------
DROP TABLE CustCopy ;
</code></pre>
<ul>
<li>æ¯ä¸ªDBMSå¯¹è¡¨é‡å‘½åçš„æ”¯æŒæœ‰æ‰€ä¸åŒã€‚å¯¹äºè¿™ä¸ªæ“ä½œï¼Œä¸å­˜åœ¨ä¸¥æ ¼çš„æ ‡å‡†ã€‚DB2ã€MariaDBã€My SQLã€Oracleå’ŒPostgreSQLç”¨æˆ·ä½¿<br>
ç”¨RENAMEè¯­å¥ï¼ŒSQL  Serverç”¨æˆ·ä½¿ç”¨sp_renameå­˜å‚¨è¿‡ç¨‹ï¼ŒSQLiteç”¨æˆ·ä½¿ç”¨ALTER TABLEè¯­å¥ã€‚</li>
</ul>
<h1 id="ä½¿ç”¨è§†å›¾">ä½¿ç”¨è§†å›¾</h1>
<blockquote>
<p>CREATE  VIEW viewname</p>
</blockquote>
<ul>
<li>è§†å›¾æ˜¯è™šæ‹Ÿçš„è¡¨</li>
<li>è§†å›¾å¯ä»¥é‡ç”¨SQLè¯­å¥</li>
<li>å¯ä»¥ç®€åŒ–å¤æ‚SQLæ“ä½œï¼Œåœ¨ç¼–å†™æŸ¥è¯¢åï¼Œå¯ä»¥æ–¹ä¾¿é‡ç”¨å®ƒï¼Œè€Œä¸å¿…çŸ¥é“å…¶æŸ¥è¯¢çš„ç»†èŠ‚</li>
<li>ä½¿ç”¨è¡¨çš„ä¸€éƒ¨åˆ†è€Œä¸æ˜¯æ•´ä¸ªè¡¨</li>
<li>ä¿æŠ¤æ•°æ®</li>
<li>æ›´æ”¹æ•°æ®çš„è¡¨ç°æ ¼å¼</li>
<li>è§†å›¾ä¸åŒ…å«æ•°æ®ï¼Œæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½ä¼šé‡æ–°æ£€ç´¢ï¼Œå› æ­¤å¦‚æœç‰¹åˆ«å¤æ‚çš„SQLæŸ¥è¯¢æ€§èƒ½ä¼šä¸‹é™çš„å¾ˆå‰å®³ã€‚</li>
</ul>
<pre><code class="language-SQL">---åˆ›å»ºè§†å›¾------
CREATE VIEW ProductCustomers AS
SELECT cust_name,cust_contact,prod_id
FROM Customers,Orders,OrderItems
WHERE Customers.cust_id = Orders.cust_id AND OrderItems.order_item = Orders.order_num
---æŸ¥çœ‹è§†å›¾-----------
--è¿™æ¡è¯­å¥åˆ›å»ºä¸€ä¸ªåä¸ºProductCustomersçš„è§†å›¾ï¼Œå®ƒè”ç»“ä¸‰ä¸ªè¡¨ï¼Œè¿”å›å·²è®¢è´­äº†ä»»æ„äº§å“çš„æ‰€æœ‰é¡¾å®¢çš„åˆ—è¡¨ã€‚
SELECT * FROM ProductCustomers
--æ£€ç´¢è®¢è´­äº†äº§å“RGA N01çš„é¡¾å®¢
SELECT * FROM ProductCustomers
WHERE prod_id = 'RGAN01'
----ç”¨è§†å›¾é‡æ–°æ ¼å¼åŒ–æ£€ç´¢æ•°æ®------
CREATE VIEW VendorLocations AS
SELECT RTRIM(vend_name)+'('+RTRIM(vend_country)+')' AS  vend_title
FROM Vendors

</code></pre>
<h1 id="ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ‰¹å¤„ç†">ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹(æ‰¹å¤„ç†)</h1>
<pre><code class="language-SQL">CREATE PROCEDURE MailingListCount
AS
DECLARE @cnt INTEGER
SELECT @cnt = COUNT(*)
FROM Customers
WHERE NOT cust_email IS NULL
RETURN @cnt

DECLARE @ReturnValue INT
EXECUTE @ReturnValue=MailingListCount;
SELECT @ReturnValue
</code></pre>
<ul>
<li>åœ¨Ordersè¡¨ä¸­æ’å…¥ä¸€ä¸ªæ–°è®¢å•</li>
</ul>
<pre><code>CREATE PROCEDURE NewOrder @cust_id CHAR(10)
AS
--Declare variable for order number
DECLARE @order_num INTEGER
--Get current highest order number
SELECT @order_num = MAX(order_num)
FROM Orders
--Determine next order number
SELECT @order_num = @order_num+1
--Insert new order
INSERT INTO Orders(order_num,order_date,cust_id)
VALUES(@order_num,GETDATE(),@cust_id)
--Return order number
RETURN @order_num;
</code></pre>
<ul>
<li>æ­¤å­˜å‚¨è¿‡ç¨‹åœ¨O rdersè¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°è®¢å•ã€‚å®ƒåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³ä¸‹è®¢å•é¡¾å®¢çš„I Dã€‚è®¢å•å·å’Œè®¢å•æ—¥æœŸè¿™ä¸¤åˆ—åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­è‡ªåŠ¨ç”Ÿæˆã€‚ä»£ç é¦–å…ˆå£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡æ¥å­˜å‚¨è®¢å•å·ã€‚æ¥ç€ï¼Œæ£€ç´¢å½“å‰æœ€å¤§è®¢å•å·ï¼ˆä½¿ç”¨MA X()å‡½æ•°ï¼‰å¹¶å¢åŠ 1ï¼ˆä½¿ç”¨SELECT è¯­å¥ï¼‰ã€‚ç„¶åç”¨INSERT è¯­å¥æ’å…¥ç”±æ–°ç”Ÿæˆçš„è®¢å•å·ã€å½“å‰ç³»ç»Ÿæ—¥æœŸï¼ˆç”¨GET DA T E()å‡½æ•°æ£€ç´¢ï¼‰å’Œä¼ é€’çš„é¡¾å®¢I Dç»„æˆçš„è®¢å•ã€‚æœ€åï¼Œç”¨RET U RN @order_numè¿”å›è®¢å•å·ï¼ˆå¤„ç†è®¢å•ç‰©å“éœ€è¦å®ƒï¼‰ã€‚è¯·æ³¨æ„ï¼Œæ­¤ä»£ç åŠ äº†æ³¨é‡Šï¼Œåœ¨ç¼–å†™å­˜å‚¨è¿‡ç¨‹æ—¶åº”è¯¥å¤šåŠ æ³¨é‡Š</li>
</ul>
<pre><code>CREATE PROCEDURE NewOrder @cust_id CHAR(10)
AS
--Insert new order
INSERT INFO Orders(cust_id)
VALUES(@cust_id)
--Return order number
SELECT order_num = @@IDENTITY
</code></pre>
<ul>
<li>æ­¤å­˜å‚¨è¿‡ç¨‹ä¹Ÿåœ¨Ordersè¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°è®¢å•ã€‚è¿™æ¬¡ç”±DBMSç”Ÿæˆè®¢å•å·ã€‚å¤§å¤šæ•°DBMSéƒ½æ”¯æŒè¿™ç§åŠŸèƒ½ï¼›SQL  Serv erä¸­ç§°è¿™äº›è‡ªåŠ¨å¢é‡çš„åˆ—ä¸ºæ ‡è¯†å­—æ®µï¼ˆi den t i t y   f i el dï¼‰ï¼Œè€Œå…¶ä»–DBMSç§°ä¹‹ä¸ºè‡ªåŠ¨ç¼–å·ï¼ˆau t o  n u mberï¼‰æˆ–åºåˆ—ï¼ˆsequ en ceï¼‰ã€‚ä¼ é€’ç»™æ­¤è¿‡ç¨‹çš„å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªï¼Œå³ä¸‹è®¢å•çš„é¡¾å®¢IDã€‚è®¢å•å·å’Œè®¢å•æ—¥æœŸæ²¡æœ‰ç»™å‡ºï¼ŒDBMSå¯¹æ—¥æœŸä½¿ç”¨é»˜è®¤å€¼ï¼ˆGETDATE()å‡½æ•°ï¼‰ï¼Œè®¢å•å·è‡ªåŠ¨ç”Ÿæˆã€‚æ€æ ·æ‰èƒ½å¾—åˆ°è¿™ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„I Dï¼Ÿåœ¨SQL  Serv erä¸Šå¯åœ¨å…¨å±€å˜é‡@@IDENT ITY ä¸­å¾—åˆ°ï¼Œå®ƒè¿”å›åˆ°è°ƒç”¨ç¨‹åºï¼ˆè¿™é‡Œä½¿ç”¨SELECT è¯­å¥ï¼‰ã€‚</li>
</ul>
<h1 id="ç®¡ç†äº‹åŠ¡å¤„ç†transaction-processing">ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆtransaction processingï¼‰</h1>
<blockquote>
<p>COMMIT å’ŒROLLBACKè¯­å¥</p>
</blockquote>
<ul>
<li>äº‹åŠ¡å¤„ç†æ˜¯é€šè¿‡ç¡®ä¿æˆæ‰¹SQLæ“ä½œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œ</li>
<li>åœ¨ä½¿ç”¨äº‹åŠ¡å¤„ç†æ—¶ï¼Œæœ‰å‡ ä¸ªåå¤å‡ºç°çš„å…³é”®è¯ã€‚ä¸‹é¢æ˜¯å…³äºäº‹åŠ¡å¤„ç†éœ€è¦çŸ¥é“çš„å‡ ä¸ªæœ¯è¯­ï¼š</li>
</ul>
<ol>
<li>äº‹åŠ¡ï¼ˆtransaction ï¼‰æŒ‡ä¸€ç»„SQLè¯­å¥ï¼›</li>
<li>å›é€€ï¼ˆrollbackï¼‰æŒ‡æ’¤é”€æŒ‡å®šSQLè¯­å¥çš„è¿‡ç¨‹ï¼›</li>
<li>æäº¤ï¼ˆcommitï¼‰æŒ‡å°†æœªå­˜å‚¨çš„SQLè¯­å¥ç»“æœå†™å…¥æ•°æ®åº“è¡¨ï¼›</li>
<li>ä¿ç•™ç‚¹ï¼ˆsavepointï¼‰æŒ‡äº‹åŠ¡å¤„ç†ä¸­è®¾ç½®çš„ä¸´æ—¶å ä½ç¬¦ï¼ˆpl aceholderï¼‰ï¼Œå¯ä»¥å¯¹å®ƒå‘å¸ƒå›é€€ï¼ˆä¸å›é€€æ•´ä¸ªäº‹åŠ¡å¤„ç†ä¸åŒï¼‰ã€‚</li>
</ol>
<pre><code class="language-SQL">BEGINT RANSACTION
INSERT INTO Customers(cust_id,cust_name)
VALUES('1000000010','ToysEmporium');
--å®šä¹‰ä¿å­˜ç‚¹
SAVE TRANSACTION StartOrder;
INSERT INTO Orders(order_num,order_date,cust_id)
VALUES(20100,'2001/12/1','1000000010');
--è‹¥æ‰§è¡Œä¸æˆåŠŸå°±å›é€€åˆ°ä¿å­˜ç‚¹
IF @@ERROR&lt;&gt;0 ROLLBACK TRANSACTION StartOrder;
INSERT INTO OrderItems(order_num,order_item,prod_id,quantity,item_price)
VALUES(20100,1,'BR01',100,5.49);
IF @@ERROR&lt;&gt;0 ROLLBACK TRANSACTION StartOrder;
INSERT INTO OrderItems(order_num,order_item,prod_id,quantity,item_price)
VALUES(20100,2,'BR03',100,10.99);
IF @@ERROR&lt;&gt;0 ROLLBACK TRANSACTION StartOrder;
COMMIT TRANSACTION
</code></pre>
<h1 id="ä½¿ç”¨æ¸¸æ ‡">ä½¿ç”¨æ¸¸æ ‡</h1>
<pre><code>--åˆ›å»ºæ¸¸æ ‡
--åœ¨ä¸Šé¢ä¸¤ä¸ªç‰ˆæœ¬ä¸­ï¼ŒDECLA REè¯­å¥ç”¨æ¥å®šä¹‰å’Œå‘½åæ¸¸æ ‡ï¼Œè¿™é‡Œä¸ºCustCursorã€‚SELECT è¯­å¥å®šä¹‰ä¸€ä¸ªåŒ…å«æ²¡æœ‰ç”µå­é‚®ä»¶åœ°å€ï¼ˆNU LLå€¼ï¼‰çš„æ‰€æœ‰
é¡¾å®¢çš„æ¸¸æ ‡ã€‚
DECLARE CustCursor CURSOR
FOR
SELECT * FROM Customers
WHERE cust_email is NULL
---------------------
DECLARE @cust_id CHAR(10),
        @cust_name CHAR(50),
        @cust_address CHAR(50),
        @cust_city CHAR(50),
        @cust_state CHAR(5),
        @cust_zip CHAR(10),
        @cust_country CHAR(50),
        @cust_contact CHAR(50),
        @cust_email CHAR(255)
OPEN CustCursor
FETCH NEXT FROM CustCursor
INTO @cust_id,@cust_name,@cust_address,
     @cust_city,@cust_state,@cust_zip,
     @cust_country,@cust_contact,@cust_email
WHILE @@FETCH_STATUS=0
BEGIN
    --å ä½ç¬¦
FETCH NEXT FROM CustCursor
	INTO @cust_id,@cust_name,@cust_address,
         @cust_city,@cust_state,@cust_zip,
         @cust_country,@cust_contact,@cust_email
END
CLOSE CustCursor
DEALLOCATE  CustCursor
</code></pre>
<ul>
<li>åœ¨æ­¤ä¾‹ä¸­ï¼Œä¸ºæ¯ä¸ªæ£€ç´¢å‡ºçš„åˆ—å£°æ˜ä¸€ä¸ªå˜é‡ï¼ŒFET CHè¯­å¥æ£€ç´¢ä¸€è¡Œå¹¶ä¿å­˜å€¼åˆ°è¿™äº›å˜é‡ä¸­ã€‚ä½¿ç”¨WHILEå¾ªç¯å¤„ç†æ¯ä¸€è¡Œï¼Œæ¡ä»¶WHILE @@FET CH_ST A T U S = 0åœ¨å–ä¸å‡ºæ›´å¤šçš„è¡Œæ—¶ç»ˆæ­¢å¤„ç†ï¼ˆé€€å‡ºå¾ªç¯ï¼‰ã€‚è¿™ä¸ªä¾‹å­ä¹Ÿä¸è¿›è¡Œå…·ä½“çš„å¤„ç†ï¼Œå®é™…ä»£ç ä¸­ï¼Œåº”è¯¥ç”¨å…·ä½“çš„å¤„ç†ä»£ç æ›¿æ¢å…¶ä¸­çš„â€¦å ä½ç¬¦ã€‚</li>
</ul>
<h1 id="é«˜çº§sqlç‰¹æ€§">é«˜çº§SQLç‰¹æ€§</h1>
<h2 id="çº¦æŸ">çº¦æŸ</h2>
<h2 id="ç´¢å¼•">ç´¢å¼•</h2>
<h2 id="è§¦å‘å™¨">è§¦å‘å™¨</h2>
</span></p></div><div id = "warn"></div>
	<br>
	<hr>
<div style="color: #ccc;font-size:14px;"><i class="fa fa-user"></i>æœ¬æ–‡ç”±<a rel="license" href="/">ç¢ç¢å¿µ</a>åˆ›ä½œ</div>	
<div style="color: #ccc;font-size:14px;"><i class="fa fa-cc"></i>è¯¥æ–‡ç« é‡‡ç”¨<a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</div>
<div style="color: #ccc;font-size:14px;"><i class="fa fa-clock-o"></i>å‘å¸ƒæ—¶é—´ä¸ºï¼š2017-05-28</div>   

</div>
</div>

<style type="text/css">
#mememe {
	border:3px;
	border-radius:5px;
    background-repeat: no-repeat;
    height: 100%;
	width: 100%;
	display: inline-block;
	border-radius:5px; 
}
</style>

<div style="width:100%;overflow:hidden">



          <div style="float:left;text-align:left;color:#ccc;font-size:18px;width:50%;">
            ä¸Šä¸€ç¯‡
            <a href="https://lilulula.github.io/post/di-tu-dao-hang-chan-pin-fen-xi-bao-gao-201707/">
              <p class="post-title">
                <b>åœ°å›¾å¯¼èˆªäº§å“åˆ†ææŠ¥å‘Š</b>
              </p>
            </a>
          </div>

</div>

<div class="doc_comments">

</div>
<script>
var link="";$("img").each((i,o)=>{var o=$(o);if(o.attr("src").indexOf("sinaimg")>0||o.attr("src").indexOf("qpic")>0||o.attr("src").indexOf("baidu")>0||o.attr("src").indexOf("sinaimg")>0){o.attr("referrerpolicy","no-referrer");link=o.attr("src");o.attr("src",link);}});
imgList = document.querySelectorAll('img')
imgList.forEach(img => {
  if (img.alt !== "logo" && img.alt !== "featureimg"){
  let div1 = document.createElement('div')
  let div = document.createElement('div')
  div.className='back';
  div.setAttribute("data-src",img.src)
  var figuration = document.createElement("figcaption")
  figuration.innerHTML = '<a href="' + img.src + '">' + img.alt + '</a>'
  img.replaceWith(div1)
  div1.appendChild(div)
  div.appendChild(img)
  div1.appendChild(figuration)}
})
$('img').on('error',function(){$(this).prop('src','https://lilulula.github.io//media/images/broken.jpg')});$("a").attr("rel","external nofollow");$("a[rel='external nofollow']").attr("target","_blank");$("a[href^='#']").removeAttr("target");$("a.ex").removeAttr("rel");$("a.ex").removeAttr("target");
content="<div class='warn'>æœ¬æ–‡æœ€åæ›´æ–°äº2017-05-28ï¼Œå·²è¶…è¿‡ 1 å¹´æ²¡æœ‰æ›´æ–°ï¼Œæ¶‰åŠçš„å†…å®¹å¯èƒ½å·²ç»å¤±æ•ˆï¼</div>";var date1="2017-05-28 15:04:44";date1=date1.replace("-","/");var date2=new Date();var date3=date2.getTime()-new Date(date1).getTime();var days=Math.floor(date3/(24*3600*1000));if(days>=365){document.getElementById("warn").innerHTML=content};
$('#pjax-container').lightGallery({
    selector: '.back'
});
tocbot.init({
	tocSelector: '.toc',
	contentSelector: '.main-inner',
	headingSelector: 'h1, h2, h3, h4, h5',
	positionFixedSelector: ".toc",
	scrollSmooth: true,
	fixedSidebarOffset: 'auto',
    scrollSmoothOffset: -80,
    headingsOffset: -500
});
</script>
  </div>
</div>


      </div>
<div class="toc-container">
<ul class="markdownIt-TOC">
<li><a href="#%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE">æ£€ç´¢æ•°æ®</a></li>
<li><a href="#%E6%8E%92%E5%BA%8F%E6%95%B0%E6%8D%AE">æ’åºæ•°æ®</a></li>
<li><a href="#%E8%BF%87%E6%BB%A4%E8%AF%AD%E5%8F%A5">è¿‡æ»¤è¯­å¥</a></li>
<li><a href="#%E6%A8%A1%E7%B3%8A%E8%BF%87%E6%BB%A4">æ¨¡ç³Šè¿‡æ»¤</a></li>
<li><a href="#%E5%AD%97%E6%AE%B5%E8%AE%A1%E7%AE%97">å­—æ®µè®¡ç®—</a></li>
<li><a href="#%E5%87%BD%E6%95%B0">å‡½æ•°</a></li>
<li><a href="#%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE">åˆ†ç»„æ•°æ®</a></li>
<li><a href="#%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2">åµŒå¥—æŸ¥è¯¢</a></li>
<li><a href="#%E8%BF%9E%E6%8E%A5%E8%A1%A8">è¿æ¥è¡¨</a></li>
<li><a href="#%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2">ç»„åˆæŸ¥è¯¢</a></li>
<li><a href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE">æ’å…¥æ•°æ®</a></li>
<li><a href="#%E6%9B%B4%E6%96%B0%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE">æ›´æ–°åˆ é™¤æ•°æ®</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E7%B1%BB">åˆ›å»ºå’Œæ“çºµç±»</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE">ä½¿ç”¨è§†å›¾</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%89%B9%E5%A4%84%E7%90%86">ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹(æ‰¹å¤„ç†)</a></li>
<li><a href="#%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86transaction-processing">ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆtransaction processingï¼‰</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87">ä½¿ç”¨æ¸¸æ ‡</a></li>
<li><a href="#%E9%AB%98%E7%BA%A7sql%E7%89%B9%E6%80%A7">é«˜çº§SQLç‰¹æ€§</a>
<ul>
<li><a href="#%E7%BA%A6%E6%9D%9F">çº¦æŸ</a></li>
<li><a href="#%E7%B4%A2%E5%BC%95">ç´¢å¼•</a></li>
<li><a href="#%E8%A7%A6%E5%8F%91%E5%99%A8">è§¦å‘å™¨</a></li>
</ul>
</li>
</ul>

</div>
    </div>
	
   <div class="footer">
<div class="site_footer_wrap"><div class="site_footer">

      <div class="mysocials"><div class="my_socials">
		   
			   
    
			   
    
			   
    
			   
    
			   
    
			   
    
</div>
      </div>

      <div class="copyright" id="copyright">
	  <script>
		var date=new Date;
		var year=date.getFullYear(); 
		document.write("Copyright Â© "+year+" " + "ç¢ç¢å¿µ. ");
		</script>
		Powered by lula.
		<br>
		æœ¬ç«™å·²ç¨³å®šè¿è¡Œäº†
		<strong><script type="text/javascript">
		var urodz= new Date("08/27/2016");
		var now = new Date();
		var ile = now.getTime() - urodz.getTime();
		var dni = Math.floor(ile / (1000 * 60 * 60 * 24));
		document.write(+dni)
		</script>
		</strong>å¤©
		<br>
		æœ¬ç«™æ€»è®¿é—®é‡ä¸º <strong><span id="busuanzi_value_site_uv"></span></strong> æ¬¡
	  
      </div>
	  <img src="https://lilulula.github.io//media/images/font.svg">

    </div>

<script type="text/javascript" src="https://lilulula.github.io//media/scripts/love.js"></script>
<script type="text/javascript" src="https://lilulula.github.io//media/scripts/darkmode.js"></script>
<script>
var options = {
  bottom: '64px', // default: '32px'
  right: '32px', // default: '32px'
  left: 'unset', // default: 'unset'
  time: '0.5s', // default: '0.3s'
  mixColor: '#fff', // default: '#fff'
  backgroundColor: '#fff',  // default: '#fff'
  buttonColorDark: '#100f2c',  // default: '#100f2c'
  buttonColorLight: '#fff', // default: '#fff'
  saveInCookies: false, // default: true,
  label: 'ğŸŒ“', // default: ''
  autoMatchOsTheme: true // default: true
}

//const darkmode = new Darkmode(options);
//darkmode.showWidget();

</script>
<script>
hljs.initHighlightingOnLoad();
</script>

</body>

</html>
